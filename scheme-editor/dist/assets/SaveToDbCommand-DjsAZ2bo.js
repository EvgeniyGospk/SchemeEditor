var m=Object.defineProperty;var o=(s,e,t)=>e in s?m(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>o(s,typeof e!="symbol"?e+"":e,t);import{L as i}from"./index-DKNJtNe6.js";class d{constructor(e,t,a){h(this,"scheme");h(this,"storageService");h(this,"preview");this.scheme=e,this.storageService=t,this.preview=a}execute(){this.scheme.lastModified=Date.now(),i.info(`SaveToDbCommand: Attempting to save scheme "${this.scheme.name}" with ${this.scheme.getShapes().length} shapes and ${this.scheme.getLines().length} lines`),i.debug("SaveToDbCommand: Scheme data:",{id:this.scheme.id,name:this.scheme.name,shapesCount:this.scheme.getShapes().length,linesCount:this.scheme.getLines().length,lastModified:this.scheme.lastModified}),this.storageService.saveSchemeToDB(this.scheme,this.preview).then(()=>{i.info(`Scheme "${this.scheme.name}" saved to IndexedDB with preview`)}).catch(e=>{i.error("Failed to save scheme:",e)})}undo(){}}export{d as SaveToDbCommand};
